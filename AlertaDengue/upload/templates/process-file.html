{% extends 'base.html' %}
{% load i18n %}
{% load static %}

{% block content %}
<div id="status"></div>

<script>
function updateTaskStatus() {
    let intervalId = setInterval(() => {
        fetch('/upload/sinan/chunk-upload-file/?task_id={{task_id}}', {
            method: 'GET',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'
            }
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            console.log('Task status:', data.task_status);
            if (data.task_status !== "STARTED") {
                clearInterval(intervalId);
            }
        })
        .catch(error => {
            console.error('GET request error:', error);
        });
    }, 1000);
}

updateTaskStatus();
</script>
{% endblock %}


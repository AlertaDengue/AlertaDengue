{% load i18n %}
{% load bootstrap4 %}
{% load static %}

<li id="{{id}}" class="list-group-item
  {% if status == 0 %}list-group-item-warning
  {% elif status == 1 %}list-group-item-success
  {% elif status == 2 %}list-group-item-danger
  {% else %}
  {% endif %}">
  <div style="display: flex; align-items: center;">
    <div style="flex: 1;">{{filename}}</div>
    <div>
      {% if status == 2 %}
        <i class="fas fa-exclamation-circle" 
           data-toggle="tooltip" 
           title="{{error}}"
           onclick="showErrorMessage(event, '{{id}}')" 
           style="cursor: pointer; color: #dc3545; margin-left: 10px;">
        </i>
        
        <div id="error-message-{{id}}" class="error-message" style="display: none;">
          {{error}}
        </div>
      {% endif %}
    </div>
  </div>
</li>

<style>
.error-message {
  position: absolute;
  left: 70%;
  background-color: #dc3545;
  color: white;
  padding: 8px 15px;
  border-radius: 5px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  z-index: 9999;
  display: none;
}
</style>

<script>
function showErrorMessage(event, id) {
  event.preventDefault();

  const errorMessage = document.getElementById('error-message-' + id);
  const icon = event.target.closest('.list-group-item').querySelector('.error-icon');

  if (errorMessage.style.display === 'none' || errorMessage.style.display === '') {
    errorMessage.style.display = 'block';
  } else {
    errorMessage.style.display = 'none';
  }

  document.addEventListener('click', function (e) {
    if (!e.target.closest('.list-group-item') || e.target === icon) {
      errorMessage.style.display = 'none';
    }
  });
}
</script>

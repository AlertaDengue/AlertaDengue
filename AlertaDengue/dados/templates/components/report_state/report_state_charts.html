{% load lookup %}
{% load i18n %}

{% load hashthis %}

{% block content %}

<div class="container mt-3">
  <!-- Nav tabs -->
  <ul class="nav nav-tabs" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" data-toggle="tab" href="#dengue-{{ regional_id }}">Dengue</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#chikungunya-{{ regional_id }}">Chikungunya</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#zika-{{ regional_id }}">Zika</a>
    </li>
  </ul>

  <!-- Tab panes -->
  <div class="tab-content">

    <div id="dengue-{{ regional_id }}" class="container tab-pane active"><br>
      <div class="row">
        <div class="col-6 col-sm-12 col-md-6">
          {{ notif_chart|lookup:'dengue'| safe }}
        </div>
        <div class="col-6 col-sm-12 col-md-6">
          {{ level_chart|lookup:'dengue'| safe }}
        </div>
      </div>
    </div>

    <div id="chikungunya-{{ regional_id }}" class="container tab-pane fade"><br>
      <div class="row">
        <div class="col-6 col-sm-12 col-md-6">
          {{ notif_chart|lookup:'chikungunya'| safe }}
        </div>
        <div class="col-6 col-sm-12 col-md-6">
          {{ level_chart|lookup:'chikungunya'| safe }}
        </div>
      </div>
    </div>

    <div id="zika-{{ regional_id }}" class="container tab-pane fade"><br>
      <div class="row">
        <div class="col-6 col-sm-12 col-md-6">
          {{ notif_chart|lookup:'zika'| safe }}
        </div>
        <div class="col-6 col-sm-12 col-md-6">
          {{ level_chart|lookup:'zika'| safe }}
        </div>
      </div>
    </div>

  </div>

</div>

{% endblock %}

<script type="text/javascript">

  $(document).on('shown.bs.tab', 'a[data-toggle="tab"]', function (event) {
    var doc = $(".tab-pane.active .plotly-graph-div");
    for (var i = 0; i < doc.length; i++) {
        Plotly.relayout(doc[i], {autosize: true});
    }
})

</script>
